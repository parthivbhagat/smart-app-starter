{"version":3,"sources":["webpack:///webpack/bootstrap 6e7c4ca5165f4eae5307","webpack:///./webpack.entry.js","webpack:///./src/less/manifest.less","webpack:///./src/js/index.js","webpack:///./src/js/starter_app.js","webpack:///./src/js/util.js","webpack:///./src/js/patient.js"],"names":[],"mappings":"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","file":"./js/starter_app.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId])\n \t\t\treturn installedModules[moduleId].exports;\n\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\texports: {},\n \t\t\tid: moduleId,\n \t\t\tloaded: false\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.loaded = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(0);\n\n\n\n/** WEBPACK FOOTER **\n ** webpack/bootstrap 6e7c4ca5165f4eae5307\n **/","// This is the entry point for webpack to distribute assets\n\n// Require all less files and output them as css for non webpack consumers\nrequire('./src/less/manifest.less');\n\n// Require all JS and output as a single js bundle.\n// Note, we are requiring the es5 js.\nrequire('./src/js');\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./webpack.entry.js\n ** module id = 2\n ** module chunks = 0\n **/","// removed by extract-text-webpack-plugin\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./src/less/manifest.less\n ** module id = 3\n ** module chunks = 0\n **/","import StarterApp from './starter_app';\r\n\r\nwindow.StarterApp = StarterApp;\n\n\n/** WEBPACK FOOTER **\n ** ./src/js/index.js\n **/","/*jshint esversion: 6 */\r\nimport Util from './util';\r\nimport Patient from './patient';\r\n\r\nclass StarterApp {\r\n  static extractData(){\r\n   \r\n    const ret = $.Deferred();     \r\n    \r\n    function onError() {\r\n      console.log('Loading error', arguments);\r\n      ret.reject();\r\n    }\r\n     \r\n\r\n    function onReady(smart)  {\r\n      if (smart.hasOwnProperty('patient')) { \r\n        const patient = smart.patient;\r\n        const pt = patient.read();\r\n        const obv = smart.patient.api.fetchAll({type: 'Observation', query: {code: {$or: ['http://loinc.org|8302-2']}}});\r\n\r\n        $.when(pt, obv).fail(onError);\r\n\r\n        $.when(pt, obv).done(function(patient, obv) {\r\n          const byCodes = smart.byCodes(obv, 'code');\r\n          const gender = patient.gender;\r\n          const dob = new Date(patient.birthDate);     \r\n          const day = dob.getDate(); \r\n          const monthIndex = dob.getMonth() + 1;\r\n          const year = dob.getFullYear();\r\n\r\n          const dobStr = monthIndex + '/' + day + '/' + year;\r\n          \r\n          const fname = patient.name[0].given.join(' ');\r\n          const lname = patient.name[0].family.join(' ');\r\n          \r\n          const height = byCodes('8302-2');\r\n        \r\n          let p = new Patient();\r\n          p.birthday = dobStr;\r\n          p.gender = gender;\r\n          p.fname = fname;\r\n          p.lname = lname;\r\n          p.age = parseInt(Util.calculateAge(dob));\r\n\r\n          if(typeof height[0] !== 'undefined'){\r\n            p.height = height[0].valueQuantity.value;\r\n          }\r\n          \r\n          ret.resolve(p);\r\n        });\r\n      } else { \r\n        onError();\r\n      }\r\n      \r\n    }\r\n\r\n    FHIR.oauth2.ready(onReady, onError);\r\n\r\n    return ret.promise();\r\n  }\r\n}\r\n\r\nexport default StarterApp;\r\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/js/starter_app.js\n **/","/*jshint esversion: 6 */\r\nclass Util{\r\n  static isLeapYear(year) {\r\n    return new Date(year, 1, 29).getMonth() === 1;\r\n  }\r\n\r\n  static calculateAge(date) {\r\n    const d = new Date(date), now = new Date();\r\n    let years = now.getFullYear() - d.getFullYear();\r\n    d.setFullYear(d.getFullYear() + years);\r\n    if (d > now) {\r\n      years--;\r\n      d.setFullYear(d.getFullYear() - 1);\r\n    }\r\n    const days = (now.getTime() - d.getTime()) / (3600 * 24 * 1000);\r\n    return years + days / (this.isLeapYear(now.getFullYear()) ? 366 : 365);\r\n  }\r\n}\r\n\r\nexport default Util;\n\n\n/** WEBPACK FOOTER **\n ** ./src/js/util.js\n **/","/*jshint esversion: 6 */\r\nclass Patient {  \r\n  constructor() {\r\n    this.fname = '';\r\n    this.lname = '';\r\n    this.gender = '';\r\n    this.birthday = '';\r\n    this.age = '';\r\n    this.height = '';\r\n  }\r\n}\r\n\r\nexport default Patient;\n\n\n/** WEBPACK FOOTER **\n ** ./src/js/patient.js\n **/"],"sourceRoot":""}